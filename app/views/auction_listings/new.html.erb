<section>
  <header>
    <h1>New Auction Listing</h1>
  </header>

  <%= form_with model: @auction_listing do |form| %>
    <div class="field">
      <%= form.label :item_name %>
      <%= form.text_field :item_name %>
    </div>
    <div class="field">
      <%= form.label :item_type %>
      <%= form.text_field :item_metadata_item_type, name: "auction_listing[item_metadata][item_type]" %>
    </div>
    <div class="field">
      <%= form.label :rarity %>
      <%= form.text_field :item_metadata_rarity, name: "auction_listing[item_metadata][rarity]" %>
    </div>
    <div class="field">
      <%= form.label :quantity %>
      <%= form.number_field :quantity, value: 1 %>
    </div>
    <div class="field">
      <%= form.label :currency_type %>
      <%= form.select :currency_type, %w[gold silver premium_tokens] %>
    </div>
    <div class="field">
      <%= form.label :starting_bid %>
      <%= form.number_field :starting_bid %>
    </div>
    <div class="field">
      <%= form.label :buyout_price %>
      <%= form.number_field :buyout_price %>
    </div>
    <div class="field">
      <%= form.label :ends_at %>
      <%= form.datetime_field :ends_at %>
    </div>
    <div class="field">
      <%= form.label :location_key, "Listing Location" %>
      <%= form.text_field :location_key %>
    </div>
    <div class="field">
      <%= form.label :required_profession_id, "Commission Profession" %>
      <%= form.collection_select :required_profession_id, @professions, :id, :name, include_blank: "Open to all" %>
    </div>
    <div class="field">
      <%= form.label :required_skill_level %>
      <%= form.number_field :required_skill_level, min: 0 %>
    </div>
    <div class="field">
      <%= form.label :commission_scope %>
      <%= form.select :commission_scope, [%w[Personal personal], %w[Guild guild], %w[Public public]], include_blank: false %>
    </div>
    <% if current_user.has_any_role?(:gm, :admin) %>
      <div class="field">
        <%= form.check_box :override_inflation_controls %>
        <%= form.label :override_inflation_controls, "Override listing caps (GM only)" %>
      </div>
    <% end %>
    <div class="actions">
      <%= form.submit "Post Listing" %>
    </div>
  <% end %>
</section>
